{"version":3,"sources":["context/AuthProvider/firebase.js","context/AuthProvider/AuthProvider.js","hooks/useLocalStorage.js","context/ContactsProvider/ContactsProvider.js","context/ConversationsProvider/ConversationsProvider.js","context/SocketProvider/SocketProvider.js","view/components/NewConversationModal.js","view/components/Conversations.js","view/components/AddFriendModal.js","view/components/Friends.js","view/components/Sidebar.js","view/components/Chat.js","view/Dashboard/Dashboard.js","view/Login/Login.js","view/Signup/Signup.js","App.js","index.js"],"names":["firebaseAuth","firebaseApp","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","AuthContext","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentuser","useEffect","onAuthStateChanged","user","ctx","signup","email","password","createUserWithEmailAndPassword","login","signInWithEmailAndPassword","logout","signOut","Provider","value","useLocalStorage","key","initialValue","prefixedKey","jsonValue","localStorage","getItem","JSON","parse","setValue","setItem","stringify","ContactsContext","useContacts","ContactsProvider","contacts","setContacts","createContact","id","name","prevState","ConversationsContext","useConversations","ConversationsProvider","conversations","setConversations","selectedConversationId","setSelectedConversationId","socket","useSocket","formattedConversations","map","recipients","messages","formattedRecipients","recipient","contact","find","formattedMessages","message","sender","fromMe","senderName","addMessageToConversation","useCallback","text","console","log","newConversation","newMessage","newConversations","conversation","arr1","arr2","length","sort","every","element","index","on","off","createConversation","selectedConversation","sendMessage","emit","serverUrl","window","location","origin","SocketContext","SocketProvider","setSocket","newSocket","io","replace","query","close","NewConversationModal","closeModal","selectedContactIds","setSelectedContactIds","handleCheckboxChange","contactId","includes","filter","Modal","Header","closeButton","Body","Form","onSubmit","e","preventDefault","Group","controlId","Check","type","label","onChange","bind","Button","Conversations","modalOpen","setModalOpen","className","ListGroup","variant","Item","active","action","onClick","join","show","onHide","AddFriendModal","idRef","useRef","nameRef","current","Label","Control","ref","required","Friends","eventKeys","Sidebar","activeKey","setActiveKey","style","width","Tab","Container","onSelect","Nav","Link","eventKey","Content","Pane","cursor","Chat","setText","setRef","node","scrollIntoView","smooth","lastMessage","recipientIds","InputGroup","target","height","resize","Append","Dashboard","props","Login","error","setError","emailRef","passwordRef","handleSubmit","catch","Card","maxWidth","Alert","to","withRouter","history","confirmPasswordRef","then","push","App","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5821dd46.chunk.js","sourcesContent":["import firebaseApp from 'firebase/app';\nimport 'firebase/auth';\n\nconst firebaseConfig = {\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_FIREBASE_APP_ID,\n    measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID,\n  };\n\n  const firebase = firebaseApp.initializeApp(firebaseConfig);\n\n  export const firebaseAuth = firebaseApp.auth();\n  export default firebase;","import React, { useState, useEffect, createContext, useContext } from 'react';\n\nimport { firebaseAuth } from './firebase';\n\nconst AuthContext = createContext();\n\nconst AuthProvider = ({ children }) => {\n    const [currentUser, setCurrentuser] = useState();\n\n    const signup = (email, password) => {\n        return firebaseAuth.createUserWithEmailAndPassword(email, password);\n    };\n\n    const login = (email, password) => {\n        return firebaseAuth.signInWithEmailAndPassword(email, password);\n    };\n\n    const logout = () => {\n        return firebaseAuth.signOut();\n    };\n\n    useEffect(() => {\n        const unsubscribe = firebaseAuth.onAuthStateChanged((user) => {\n            if (user) {\n                //user.getIdToken(true).then((token) => console.log(token));\n                setCurrentuser(user);\n            } else {\n                setCurrentuser();\n            }\n        });\n\n        return unsubscribe;\n    }, []);\n\n    const ctx = {\n        signup,\n        login,\n        currentUser,\n        logout,\n    };\n    \n\n    return <AuthContext.Provider value={ctx}>{children}</AuthContext.Provider>\n}\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport default AuthProvider;","import { useEffect, useState } from 'react';\n\nconst PREFIX = 'myChat.';\n\nexport const useLocalStorage = (key, initialValue) => {\n    const prefixedKey = PREFIX + key;\n    const [value, setValue] = useState(() => {\n        const jsonValue = localStorage.getItem(prefixedKey);\n        if (jsonValue != null) return JSON.parse(jsonValue);\n        if (typeof initialValue === 'function') {\n            return initialValue();\n        } else {\n            return initialValue;\n        }\n    });\n\n    useEffect(() => {\n        localStorage.setItem(prefixedKey, JSON.stringify(value));\n    }, [value, prefixedKey]);\n\n    return [value, setValue];\n};","import React, { createContext, useContext } from 'react'\n\nimport { useLocalStorage } from '../../hooks'\n\nconst ContactsContext = createContext()\n\nconst ContactsProvider = ({ children }) => {\n    const [contacts, setContacts] = useLocalStorage('contacts', []);\n\n    const createContact = (id, name) => {\n        setContacts((prevState) => [...prevState, { id, name }]);\n    }\n\n    const ctx = {\n        contacts,\n        createContact,\n    }\n\n    return (\n        <ContactsContext.Provider value={ctx}>{children}</ContactsContext.Provider>\n    )\n}\n\nexport const useContacts = () => useContext(ContactsContext);\n\nexport default ContactsProvider;","import React, {\n    createContext,\n    useContext,\n    useState,\n    useEffect,\n    useCallback } from 'react'\n\nimport { useLocalStorage } from '../../hooks'\nimport { useContacts, useAuth, useSocket } from '../../context';\n\nconst arraysEqual = (arr1, arr2) => {\n    if (arr1.length !== arr2.length) return false;\n    arr1.sort();\n    arr2.sort();\n    return arr1.every((element, index) => element === arr2[index]);\n};\n\nconst ConversationsContext = createContext();\n\nconst ConversationsProvider = ({ children }) => {\n    const [conversations, setConversations] = useLocalStorage('conversations', []);\n    const [selectedConversationId, setSelectedConversationId] = useState(0);\n    const { contacts } = useContacts();\n    const { socket } = useSocket();\n    const { currentUser: { email: id = '' } = {} } = useAuth();\n\n    const createConversation = (recipients) => {\n        setConversations((prevState) => [...prevState, { recipients, messages: [] }]);\n    };\n\n    const formattedConversations = conversations.map(({ recipients, messages }) => {\n        const formattedRecipients = recipients.map((recipient) => {\n            const contact = contacts.find((contact) => contact.id === recipient);\n            const name = (contact && contact.name) || recipient;\n            return { id: recipient, name };\n        });\n\n        const formattedMessages = messages.map((message) => {\n            const contact = contacts.find((contact) => contact.id === message.sender);\n            const name = (contact && contact.name) || message.sender;\n            const fromMe = id === message.sender;\n            return { ...message, senderName: name, fromMe }\n        })\n\n        return { ...conversations, recipients: formattedRecipients, messages: formattedMessages };\n    })\n\n    const addMessageToConversation = useCallback(({ recipients, sender, text }) => {\n        console.log('message received')\n        setConversations((prevState) => {\n            let newConversation = true;\n            const newMessage = { sender, text };\n            const newConversations = prevState.map((conversation) => {\n                console.log(conversation.recipient, recipients)\n                if (arraysEqual(conversation.recipients, recipients)) {\n                    newConversation = false;\n                    return {\n                        ...conversation,\n                        messages: [...conversation.messages, newMessage]\n                    }\n                }\n                return conversation;\n            });\n\n            if (!newConversation) {\n                return newConversations;\n            } else {\n                return [\n                    ...prevState,\n                    { recipients, messages: [newMessage] }\n                ]\n            }\n        })\n    }, [setConversations]);\n\n    const sendMessage = (recipients, text) => {\n        socket.emit('send-message', { recipients, text });\n        addMessageToConversation({ recipients, sender: id, text });\n    };\n\n    useEffect(() => {\n        if (!socket) return;\n\n        socket.on('receive-message', addMessageToConversation)\n\n        return () => socket.off('receive-message');\n    }, [socket, addMessageToConversation]);\n\n    const ctx = {\n        conversations,\n        createConversation,\n        formattedConversations,\n        selectedConversationId,\n        selectedConversation: formattedConversations[selectedConversationId],\n        setSelectedConversationId,\n        sendMessage,\n        addMessageToConversation,\n    };\n\n    return (\n        <ConversationsContext.Provider value={ctx}>{children}</ConversationsContext.Provider>\n    );\n}\n\nexport const useConversations = () => useContext(ConversationsContext);\n\nexport default ConversationsProvider;","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport io from 'socket.io-client';\n\nimport { useAuth } from '../../context';\n\nconst serverUrl = process.env.NODE_ENV === 'development' ? 'http://localhost:8000' : window.location.origin;\n\nconst httpUrlToWebSockeUrl = (url) => {\n    return url.replace(/(http)(s)?:\\/\\//, \"ws$2://\");\n}\n\nconst SocketContext = createContext();\n\nconst SocketProvider = ({ children }) => {\n    const { currentUser: { email: id = '' } = {} } = useAuth();\n    const [socket, setSocket] = useState();\n\n    useEffect(() => {\n        const newSocket = io(httpUrlToWebSockeUrl(serverUrl), { query: { id } });\n        setSocket(newSocket);\n\n        return () => newSocket.close();\n    }, [id]);\n    \n\n    const ctx = {\n       socket,\n    };\n    \n\n    return <SocketContext.Provider value={ctx}>{children}</SocketContext.Provider>\n}\n\nexport const useSocket = () => useContext(SocketContext);\n\nexport default SocketProvider;","import React, { useState } from 'react'\nimport { Modal, Form, Button } from 'react-bootstrap';\n\nimport { useContacts, useConversations } from '../../context';\n\nexport default function NewConversationModal({ closeModal }) {\n    const [selectedContactIds, setSelectedContactIds] = useState([]);\n    const { contacts } = useContacts();\n    const { createConversation } = useConversations();\n\n    const handleCheckboxChange = (contactId) => {\n        setSelectedContactIds((prevState) => {\n            if (prevState.includes(contactId)) {\n                return prevState.filter((id) => id !== contactId);\n            } else {\n                return [...prevState, contactId];\n            }\n        });\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        createConversation(selectedContactIds);\n        closeModal();\n    };\n\n    return (\n        <>\n            <Modal.Header closeButton>Csevegés létrehozása</Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={handleSubmit}>\n                    {contacts.length ? contacts.map((contact) => (\n                        <Form.Group controlId={contact.id} key={contact.id}>\n                            <Form.Check \n                                type=\"checkbox\"\n                                value={selectedContactIds.includes(contact.id)}\n                                label={contact.name}\n                                onChange={handleCheckboxChange.bind(null, contact.id)}\n                            />\n                        </Form.Group>\n                    )) : <p>Nincs még barátod</p>}\n                    {!!contacts.length && <Button type=\"submit\">Létrehozás</Button>}\n                </Form>\n            </Modal.Body>\n        </>\n    );\n};\n","import React, { useState } from 'react';\nimport { Button, Modal, ListGroup } from 'react-bootstrap';\n\nimport { useConversations } from '../../context'\n\nimport NewConversationModal from './NewConversationModal';\n\nconst Conversations = () => {\n    const [modalOpen, setModalOpen] = useState(false)\n    const { formattedConversations, selectedConversationId, setSelectedConversationId } = useConversations();\n\n    const openModalHandler = () => {\n        setModalOpen(true);\n    }\n\n    const closeModal = () => {\n        setModalOpen(false);\n    }\n\n    return (\n        <div className=\"d-flex flex-column justify-content-between h-100\">\n            <div>\n                <ListGroup variant=\"flush\">\n                    {formattedConversations.map((conversation, index) => (\n                        <ListGroup.Item\n                            key={index}\n                            active={index === selectedConversationId}\n                            action\n                            onClick={setSelectedConversationId.bind(null, index)}>\n                            {conversation.recipients.map((recipient) => recipient.name).join(', ')}\n                        </ListGroup.Item>\n                    ))}\n                </ListGroup>\n            </div>\n            <Button className=\"rounded-0\" onClick={openModalHandler}>\n                Csevegés létrehozása\n            </Button>\n\n            <Modal show={modalOpen} onHide={closeModal}>\n                <NewConversationModal closeModal={closeModal}/>\n            </Modal>\n        </div>\n    )\n}\n\nexport default Conversations;","import React, { useRef } from 'react'\nimport { Modal, Form, Button } from 'react-bootstrap';\n\nimport { useContacts } from '../../context';\n\nexport default function AddFriendModal({ closeModal }) {\n    const idRef = useRef();\n    const nameRef = useRef();\n    const { createContact } = useContacts();\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        createContact(idRef.current.value, nameRef.current.value);\n        closeModal();\n    }\n\n    return (\n        <>\n            <Modal.Header closeButton>Barát hozzáadása</Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={handleSubmit}>\n                    <Form.Group>\n                        <Form.Label>E-mail</Form.Label>\n                        <Form.Control type=\"text\" ref={idRef} required/>\n                    </Form.Group>\n                    <Form.Group>\n                        <Form.Label>Név</Form.Label>\n                        <Form.Control type=\"text\" ref={nameRef} required/>\n                    </Form.Group>\n                    <Button type=\"submit\">Hozzáad</Button>\n                </Form>\n            </Modal.Body>\n        </>\n    )\n}\n","import React, { useState } from 'react';\nimport { ListGroup, Button, Modal } from 'react-bootstrap';\n\nimport { useContacts } from '../../context'\n\nimport AddFriendModal from './AddFriendModal';\n\nconst Friends = () => {\n    const [modalOpen, setModalOpen] = useState(false);\n    const { contacts } = useContacts();\n\n    const openModalHandler = () => {\n        setModalOpen(true);\n    };\n\n    const closeModal = () => {\n        setModalOpen(false);\n    };\n\n    return (\n        <div className=\"d-flex flex-column justify-content-between h-100\">\n            <div>\n                <ListGroup variant=\"flush\">\n                    {contacts.map((contact) => (\n                        <ListGroup.Item key={contact.id}>\n                            {contact.name}\n                        </ListGroup.Item>\n                    ))}\n                </ListGroup>\n            </div>\n            <Button className=\"rounded-0\" onClick={openModalHandler}>\n                Barát hozzáadása\n            </Button>\n\n            <Modal show={modalOpen} onHide={closeModal}>\n                <AddFriendModal closeModal={closeModal}/>\n            </Modal>\n        </div>\n    );\n};\n\nexport default Friends;","import React, { useState } from 'react';\n\nimport { Tab, Nav } from 'react-bootstrap';\nimport { useAuth } from '../../context';\n\nimport Conversations from './Conversations';\nimport Friends from './Friends';\n\nconst eventKeys = {\n    CONVERSATIONS: 'conversations',\n    FRIENDS: 'friends',\n};\n\nconst Sidebar = () => {\n    const [activeKey, setActiveKey] = useState(eventKeys.CONVERSATIONS);\n    const { currentUser: { email: id = '' } = {}, logout } = useAuth();\n\n    const handleLogout = () => {\n        logout();\n    };\n\n    return (\n        <div style={{ width: '250px' }} className=\"d-flex flex-column\">\n            <Tab.Container activeKey={activeKey} onSelect={setActiveKey}>\n                <Nav variant=\"tabs\" className=\"justify-content-center\">\n                    <Nav.Item>\n                        <Nav.Link eventKey={eventKeys.CONVERSATIONS}>\n                            Beszélgetések\n                        </Nav.Link>\n                    </Nav.Item>\n                    <Nav.Item>\n                        <Nav.Link eventKey={eventKeys.FRIENDS}>\n                            Barátok\n                        </Nav.Link>\n                    </Nav.Item>\n                </Nav>\n                <Tab.Content className=\"border-right overflow-auto flex-grow-1\">\n                    <Tab.Pane eventKey={eventKeys.CONVERSATIONS} className=\"h-100\">\n                        <Conversations/>\n                    </Tab.Pane>\n                    <Tab.Pane eventKey={eventKeys.FRIENDS} className=\"h-100\">\n                        <Friends/>\n                    </Tab.Pane>\n                </Tab.Content>\n                <div className=\"p-2 border-top border-right small\">\n                    Bejelentkezve: <span className=\"text-muted\">{id}</span>\n                </div>\n                <div className=\"p-2 border-top border-right small\" style={{ cursor: 'pointer' }} onClick={handleLogout}>\n                    Kijelentkezés\n                </div>\n            </Tab.Container>\n        </div>\n    )\n};\n\nexport default Sidebar;","import React, { useState, useCallback } from 'react'\nimport { Form, InputGroup, Button } from 'react-bootstrap';\n\nimport { useConversations } from '../../context'\n\nconst Chat = () => {\n    const [text, setText] = useState('');\n    const { sendMessage, selectedConversation: { recipients, messages } } = useConversations();\n    const setRef = useCallback((node) => {\n        if (node) {\n            node.scrollIntoView({ smooth: true })\n        }\n    }, []);\n\n    const handleTextChange = (e) => {\n        setText(e.target.value);\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        const recipientIds = recipients.map((recipient) => recipient.id);\n        sendMessage(recipientIds, text);\n        setText('');\n    }\n\n    return (\n        <div className=\"d-flex flex-column flex-grow-1\">\n            <div className=\"flex-grow-1 overflow-auto\">\n                <div className=\"d-flex flex-column align-items-start justify-content-end px-3\">\n                    {messages.map(({text, senderName, fromMe}, index) => {\n                        const lastMessage = messages.length - 1 === index;\n                        return (\n                            <div \n                                ref={lastMessage ? setRef : null}\n                                key={index}\n                                className={`my-1 d-flex flex-column\n                                    ${fromMe ? 'align-self-end align-items-end' : 'align-items-start'}`}\n                            >\n                                <div \n                                className={`rounded px-2 py-1 ${fromMe ? 'bg-primary text-white' : 'border'}`}>\n                                    {text}\n                                </div>\n                                <div className={`text-muted small ${fromMe ? 'text-right' : ''}`}>\n                                    {fromMe ? 'Te' : senderName}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n            <Form onSubmit={handleSubmit}>\n                <Form.Group className=\"m-2\">\n                    <InputGroup>\n                        <Form.Control\n                            type=\"textarea\"\n                            required value={text}\n                            onChange={handleTextChange}\n                            style={{ height: '75px', resize: 'none' }}\n                        />\n                        <InputGroup.Append>\n                            <Button type=\"submit\">Küldés</Button>\n                        </InputGroup.Append>\n                    </InputGroup>\n                </Form.Group>\n            </Form>\n        </div>\n    )\n}\n\nexport default Chat;\n","import React from 'react';\n\nimport { Sidebar, Chat } from '../components';\nimport { useConversations } from '../../context';\n\n\nconst Dashboard = (props) => {\n    const { selectedConversation } = useConversations();\n    return (\n        <div className=\"d-flex\" style={{ height: '100vh' }}>\n            <Sidebar />\n            {selectedConversation && <Chat/>}\n        </div>\n    )\n};\n\nexport default Dashboard;","import React, { useState, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Container, Card, Form, Button, Alert } from 'react-bootstrap';\n\nimport { useAuth } from '../../context'; \n\nconst Login = () => {\n    const [error, setError] = useState('');\n    const emailRef = useRef();\n    const passwordRef = useRef();\n    const { login } = useAuth();\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        login(emailRef.current.value, passwordRef.current.value)\n        .catch((error) => setError(error.message));\n    };\n\n    return (\n        <Container className=\"d-flex align-items-center justify-content-center\" style={{height: '100vh'}}>\n            <Card className=\"w-100\" style={{ maxWidth: '400px' }}>\n                <Card.Body>\n                    <Form className=\"w-100\" onSubmit={handleSubmit}>\n                        <Form.Group>\n                            <Form.Label>E-mail</Form.Label>\n                            <Form.Control type=\"text\" ref={emailRef} required></Form.Control>\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Label>Jelszó</Form.Label>\n                            <Form.Control type=\"password\" ref={passwordRef} required></Form.Control>\n                        </Form.Group>\n                        {error && <Alert variant=\"danger\">{error}</Alert>}\n                        <Button type=\"submit\" className=\"mr-2\" onClick={handleSubmit}>Belépés</Button>\n                    </Form>\n                    <div className=\"w-100 text-center mt-2\">\n                        <Link to=\"/signup\">Regisztráció</Link>\n                    </div>\n                </Card.Body>\n            </Card>\n        </Container>\n    );\n};\n\nexport default Login;","import React, { useRef, useState } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport { Container, Card, Form, Button, Alert } from 'react-bootstrap';\n\nimport { useAuth } from '../../context'; \n\nconst Signup = ({ history }) => {\n    const emailRef = useRef();\n    const passwordRef = useRef();\n    const confirmPasswordRef = useRef();\n    const [error, setError] = useState('');\n    const { signup } = useAuth();\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        if (passwordRef.current.value !== confirmPasswordRef.current.value) {\n            setError('A jelszó nem egyezik.');\n            return;\n        }\n\n        signup(emailRef.current.value, passwordRef.current.value)\n        .then(() => {\n            emailRef.current.value = '';\n            passwordRef.current.value = '';\n            confirmPasswordRef.current.value = '';\n            history.push('/');\n        })\n        .catch((error) => setError(error.message));\n    };\n\n    return (\n        <Container className=\"d-flex align-items-center justify-content-center\" style={{height: '100vh'}}>\n            <Card className=\"w-100\" style={{ maxWidth: '400px' }}>\n                <Card.Body>\n                    <Form className=\"w-100\" onSubmit={handleSubmit}>\n                        <Form.Group>\n                            <Form.Label>E-mail</Form.Label>\n                            <Form.Control type=\"text\" ref={emailRef} required></Form.Control>\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Label>Jelszó</Form.Label>\n                            <Form.Control type=\"password\" ref={passwordRef} required></Form.Control>\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Label>Jelszó mégegyszer</Form.Label>\n                            <Form.Control type=\"password\" ref={confirmPasswordRef} required></Form.Control>\n                        </Form.Group>\n                        {error && <Alert variant=\"danger\">{error}</Alert>}\n                        <Button type=\"submit\" className=\"mr-2\">Regisztráció</Button>\n                    </Form>\n                </Card.Body>\n            </Card>\n        </Container>\n    );\n};\n\nexport default withRouter(Signup);","import React from 'react';\nimport { Route, Switch } from \"react-router-dom\";\n\nimport { useAuth } from './context'\nimport { Login, Signup, Dashboard } from './view';\n\nfunction App() {\n  const { currentUser } = useAuth();\n\n  return (\n    <Switch>\n      <Route path=\"/signup\"><Signup/></Route>\n      <Route path=\"/\">{currentUser ? <Dashboard/> : <Login/>}</Route>\n    </Switch>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\n\nimport {\n  AuthProvider,\n  ContactsProvider,\n  ConversationsProvider,\n  SocketProvider } from './context';\n\nReactDOM.render(\n  <AuthProvider>\n    <SocketProvider>\n    <ContactsProvider>\n      <ConversationsProvider>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </ConversationsProvider>\n    </ContactsProvider>\n    </SocketProvider>\n  </AuthProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}